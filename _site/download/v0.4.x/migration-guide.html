<!DOCTYPE html>

<html>

  <head>

    <title>
      
        Migrating to 0.4.0 | Inject
      
    </title>

    <link rel="stylesheet" href="/assets/css/main.css" type="text/css" />
    

    
    <meta property="og:title" content="Migrating to 0.4.0 | Inject"/>
    <meta name="title" content="Migrating to 0.4.0 | Inject" />
    

    
    <meta property="og:description" content="CommonJS and AMD dependency management designed for the browser."/>
    <meta name="description" content="CommonJS and AMD dependency management designed for the browser." />
    

    

    <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon_v3.ico">

    <!-- tracking -->
    <!-- todo: use LinkedIn GA Tracking -->
    
    <!-- google custom search engine -->
    <script>
      (function() {
        var cx = '007454891895213570750:rm0mkbrbrmi';
        var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <!-- end google custom search engine -->
    
  </head>

  <body>

    <div class="global-header">

      <div class="top-nav">
        <div class="wrapper">
          <h2 class="logo">
            <a title="Home" href="http://www.injectjs.com">&nbsp;</a>
          </h2>
          <h2 class="head-title">
            Inject
          </h2>
        </div>
      </div>

      <div class="bottom-nav">

        <div class="wrapper">

          <ul class="nav" role="navigation">
            <li class="tab ">
              <a href="/" class="tab-name"><span>Home</span></a>
            </li>
            <li class="tab selected">
              <a href="/download" class="tab-name"><span>Download</span></a>
            </li>
            <li class="tab ">
              <a href="/docs" class="tab-name"><span>Documentation</span></a>
            </li>
            <li class="tab ">
              <a href="/news" class="tab-name"><span>News</span></a>
            </li>
            <li class="tab">
              <a href="http://github.com/linkedin/inject" class="tab-name"><span>GitHub</span></a>
            </li>
          </ul>

          <div class="global-search">
            <div class="gcse">
              <gcse:searchbox-only></gcse:searchbox-only>
            </div>
          </div>

        </div>

      </div>

    </div>

    <div class="content">

      
      <div class="row">
        <div id="content-header" class="full">
          <div class="desc">
            <div class="source">
              <a class="button" href="/download/0.5.x/inject-0.5.0.tgz">Download Inject v0.5.0</a>
              <div><a href="/download">See all versions</a></div>
            </div>
            <span class='short'>Dependency Management Got Awesome</span>
            <span class='long'>CommonJS and AMD Compliant dependency loader for modern web apps</span>
          </div>
        </div>
      </div>
      

      

<div class="row">
  <div id="content-main" class="grid16 first">
    <div class="pad">
      
        <div class="markdown-body">
          
<h1>Migrating to 0.4.0 </h1>
<hr>



          <h2 id="from-03x">From 0.3.x</h2>
<p><strong>Renamed APIs</strong> the following APIs have been moved to a new location. Search/Replace can catch instances in your code.</p>

<ul>
  <li>require.clearCache() =&gt; Inject.clearCache()</li>
  <li>require.reset() =&gt; Inject.reset()</li>
  <li>require.manifest() =&gt; Inject.manifest()</li>
  <li>require.addRule() =&gt; Inject.addRule()</li>
  <li>require.setExpires() =&gt; Inject.setExpires()</li>
  <li>require.setCrossDomain() =&gt; Inject.setCrossDomain()<br />
<strong>this method also has changes (see below)</strong></li>
  <li>require.setModuleRoot() =&gt; Inject.setModuleRoot()<br />
<strong>this method also has changes (see below)</strong></li>
  <li>Inject.defineAs() =&gt; Inject.INTERNAL.defineExecutingModuleAs()<br />
This was always intended as an internal method that needed to be reachable from the eval() scope</li>
  <li>Inject.undefineAs() =&gt; Inject.INTERNAL.undefineExecutingModule()<br />
This was always intended as an internal method that needed to be reachable from the eval() scope</li>
  <li>Inject.createModule() =&gt; Inject.INTERNAL.createModule()
This was always intended as an internal method that needed to be reachable from the eval() scope</li>
  <li>Inject.setModuleExports() =&gt; Inject.INTERNAL.setModuleExports()
This was always intended as an internal method that needed to be reachable from the eval() scope</li>
</ul>

<p><strong>APIs with Changes</strong> the following APIs have been changed. Notes for integration are included.</p>

<ul>
  <li>require.clearCache() =&gt; Inject.clearCache()<br />
This no longer takes a parameter, and simply clears the localStorage cache for Inject</li>
  <li>require.setModuleRoot() =&gt; Inject.setModuleRoot()<br />
setModuleRoot() now requires an ending slash</li>
  <li>require.setCrossDomain() =&gt; Inject.setCrossDomain()
The object passed in to Inject.setCrossDomain will contain two attributes <code>realyHtml</code> (hasn&rsquo;t changed) and <code>relaySwf</code> (new). The addition of easyXDM requires you specify a SWF file location. We recommend putting the SWF file alongside the HTML file. Additionally, the <code>relay.html</code> file will need to be updated.</li>
</ul>

<p><strong>Additional Changes</strong> you will also need to make the following changes as part of this migration</p>

<ul>
  <li>update <code>relay,.html</code> file to new version (cross domain only)<br />
Inside of <code>relay.html</code> there is a new directive <code>ALLOWED_DOMAIN</code> which you can set to the domain running inject. This will take advantage of easyXDM&rsquo;s added security.</li>
  <li>upload new <code>relay.swf</code> to a location accessible to both domains (cross domain only)</li>
  <li>Module paths for <code>require()</code> which were depending on relative information to be based on path will need to be updated. The proper implementation requires relative information to be based on the module&rsquo;s ID at invocation, not its path at resolution. This change should only affect people depending on <code>addRule()</code> in combination with relative requires.</li>
</ul>

        </div>
      
    </div>
  </div>

  <div id="content-sidebar" class="grid8">
    <div class="pad">
      <div class="block">
        <h3>Source code</h3>
        Get the source code over on <a href="http://github.com/linkedin/inject">GitHub</a>
      </div>
      
      <div class="block">
        <h3>License</h3>
        Inject is released under the <a href="https://github.com/linkedin/inject/blob/master/LICENSE">Apache Software License 2.0</a>
      </div>
    </div>
  </div>
</div>


    </div>

    <div class="global-footer">
      <div class="wrapper">
        <div class="footer">
          &copy; 2013 LinkedIn Corporation
        </div>
      </div>
    </div>

    

  </body>

</html>
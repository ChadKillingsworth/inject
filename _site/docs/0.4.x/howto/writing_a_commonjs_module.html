<!DOCTYPE html>

<html>

  <head>

    <title>
      
        Writing a CommonJS Module | Inject
      
    </title>

    <link rel="stylesheet" href="/assets/css/main.css" type="text/css" />
    

    
    <meta property="og:title" content="Writing a CommonJS Module | Inject"/>
    <meta name="title" content="Writing a CommonJS Module | Inject" />
    

    
    <meta property="og:description" content="CommonJS and AMD dependency management designed for the browser."/>
    <meta name="description" content="CommonJS and AMD dependency management designed for the browser." />
    

    

    <link rel="shortcut icon" type="image/ico" href="/assets/images/favicon_v3.ico">

    <!-- tracking -->
    <!-- todo: use LinkedIn GA Tracking -->
    
    <!-- google custom search engine -->
    <script>
      (function() {
        var cx = '007454891895213570750:rm0mkbrbrmi';
        var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <!-- end google custom search engine -->
    
  </head>

  <body>

    <div class="global-header">

      <div class="top-nav">
        <div class="wrapper">
          <h2 class="logo">
            <a title="Home" href="http://www.injectjs.com">&nbsp;</a>
          </h2>
          <h2 class="head-title">
            Inject
          </h2>
        </div>
      </div>

      <div class="bottom-nav">

        <div class="wrapper">

          <ul class="nav" role="navigation">
            <li class="tab ">
              <a href="/" class="tab-name"><span>Home</span></a>
            </li>
            <li class="tab ">
              <a href="/download" class="tab-name"><span>Download</span></a>
            </li>
            <li class="tab selected">
              <a href="/docs" class="tab-name"><span>Documentation</span></a>
            </li>
            <li class="tab ">
              <a href="/news" class="tab-name"><span>News</span></a>
            </li>
            <li class="tab">
              <a href="http://github.com/linkedin/inject" class="tab-name"><span>GitHub</span></a>
            </li>
          </ul>

          <div class="global-search">
            <div class="gcse">
              <gcse:searchbox-only></gcse:searchbox-only>
            </div>
          </div>

        </div>

      </div>

    </div>

    <div class="content">

      
      <div class="row">
        <div id="content-header" class="full">
          <div class="desc">
            <div class="source">
              <a class="button" href="/download/0.5.x/inject-0.5.0.tgz">Download Inject v0.5.0</a>
              <div><a href="/download">See all versions</a></div>
            </div>
            <span class='short'>Dependency Management Got Awesome</span>
            <span class='long'>CommonJS and AMD Compliant dependency loader for modern web apps</span>
          </div>
        </div>
      </div>
      

      

<div class="row">
  <div id="content-main" class="grid16 first">
    <div class="pad">
      
        <div class="markdown-body">
          <h1>Writing a CommonJS Module</h1>
          
            <div class="doc_version">0.4.x</div>
          
          <hr>

          
            
          
            
          
          
          
          
          <p>To get started writing CommonJS compliant modules, you can use one of two formats. The most common implementations are the Modules 1.0 specification commonly seen in nodejs, and the Asynchronous Module Definition which bears a resemblance to the dojo and ender loaders for the browser.</p>

<p>```js
// commonJS boilerplate</p>

<p>// sample code
var bar = require(&ldquo;biz&rdquo;)
var yourValue = bar.getFoo() + &ldquo;extra&rdquo;;
// end sample code</p>

<p>exports.yourExport = yourValue;
```</p>

<p>In CommonJS, your files will receive automatic scope insulation, and any variables declared with <code>var</code> will be scoped to the current file. To share objects from your file, you assign them to the globally available <code>exports</code> object. Anything assigned to <code>exports</code> will be made available to other modules, but anything you don&rsquo;t assign will remain internal to the file. This process can create new patterns for public/private/privileged design. Upon loading, <code>require</code> statements are located, and the dependencies loaded. This means there is no need to declare dependencies upfront.</p>

<p>```js
// AMD boilerplate
define(&ldquo;moduleName&rdquo;, function(require, module, exports) {
  // sample code
  var bar = require(&ldquo;biz&rdquo;)
  var yourValue = bar.getFoo() + &ldquo;extra&rdquo;;
  // end sample code</p>

<p>exports.yourExport = yourValue;
});
```</p>

<p>The AMD boilerplate is nearly identical to CommonJS. The big difference is the <code>define()</code> method which wraps the code. While there are many variants to <code>define()</code> which are allowed, this is the system compatible with the highest number of loader functions. Whereas the CommonJS boilerplate sets up the anonymous scope, you must rely on the AMD closure to do this for you. The <code>moduleName</code> is optional, but needed if you&rsquo;re concatenating files together.</p>

<h1 id="why-modules">Why Modules?</h1>
<p>Isolation and reusability are the two main reasons for adopting module usage. As an added bonus, the two most common module implementations provide scope protection and a somewhat sandboxed environment. This results in a very powerful system for including code.</p>

        </div>
        
          
        
          
            
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                  var disqus_shortname = 'injectjs';
                  var disqus_developer = 0;
                  var disqus_identifier = '/docs/0.4.x/howto/writing_a_commonjs_module';
                  var disqus_url = 'http://www.injectjs.com/docs/0.4.x/howto/writing_a_commonjs_module.html';

                  
                  var disqus_title = 'Inject v0.4.x documentation: Writing a CommonJS Module';
                  

                  /* * * DON'T EDIT BELOW THIS LINE * * */
                  (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
              </script>
              <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            
          
        
      
    </div>
  </div>

  <div id="content-sidebar" class="grid8">
    <div class="pad">
      
        
      
        
          <div class="block">
            <ul>
              
                <li><b>API</b>
                  <ul>
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/define.html" style="font-weight:normal">define</a></li>
                        
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.addrule.html" style="font-weight:normal">Inject.addRule</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.clearcache.html" style="font-weight:normal">Inject.clearCache</a></li>
                        
                      
                    
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.plugin.html" style="font-weight:normal">Inject.plugin</a></li>
                        
                      
                    
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.reset.html" style="font-weight:normal">Inject.reset</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.setcrossdomain.html" style="font-weight:normal">Inject.setCrossDomain</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.setExpires.html" style="font-weight:normal">Inject.setExpires</a></li>
                        
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/inject.setmoduleroot.html" style="font-weight:normal">Inject.setModuleRoot</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/require.html" style="font-weight:normal">require</a></li>
                        
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/require.ensure.html" style="font-weight:normal">require.ensure</a></li>
                        
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/api/require.run.html" style="font-weight:normal">require.run</a></li>
                        
                      
                    
                      
                    
                  </ul>
                </li>
              
                <li><b>How To</b>
                  <ul>
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/amd.html" style="font-weight:normal">AMD and Inject</a></li>
                        
                      
                    
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/build_from_source.html" style="font-weight:normal">Building Inject From Source</a></li>
                        
                      
                    
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/cross_domain.html" style="font-weight:normal">Using Inject on Multiple Domains</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/how_inject_works.html" style="font-weight:normal">How Inject Works</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/inject_and_libraries.html" style="font-weight:normal">Using Inject With Your Favorite Library</a></li>
                        
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/quick_start.html" style="font-weight:normal">Quick Start Guide</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/resolving_modules.html" style="font-weight:normal">How Modules are Resolved</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/using_minifiers.html" style="font-weight:normal">Using Minifiers</a></li>
                        
                      
                    
                      
                        
                          <li><a href="/docs/0.4.x/howto/using_plugins.html" style="font-weight:normal">Using Plugins, Extending Functionality</a></li>
                        
                      
                    
                      
                    
                      
                        
                          <li class="current"><a href="/docs/0.4.x/howto/writing_a_commonjs_module.html" style="font-weight:normal">Writing a CommonJS Module</a></li>
                        
                      
                    
                  </ul>
                </li>
              
            </ul>
          </div>
        
      
      <div class="block">
        <p>
          Other Versions:<br/>
          
            
              [<a href="/docs/0.5.0/index.html">0.5.0</a>]
            
          
            
          
        </p>
      </div>
    </div>
  </div>
</div>


    </div>

    <div class="global-footer">
      <div class="wrapper">
        <div class="footer">
          &copy; 2013 LinkedIn Corporation
        </div>
      </div>
    </div>

    

  </body>

</html>